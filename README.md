# 基于Libtommath库的SM2协同算法

## Instructions

上一个版本的算法链接：https://github.com/SliverChen/SM2_Coop

鉴于上一个版本使用的是openssl库，而openssl下的关于椭圆曲线运算的函数无法支持协同算法下对（x2,y2) = d1d2C1 - C1的最简实现，考虑这种情况，决定采用另外一个大数库Libtommath来实现协同算法

参考算法的链接：https://github.com/stevenpsm/GM_SM2
<br></br>

## 第一进度——熟悉libtommath的使用

首先通过编译链接对参考算法进行一次正常的执行观察能否通过该参考算法进行修改以达到自身的目的

### 第一进度的补充进度（2021-12-23 13：30）

目前已经将部分比较核心的代码跟着写的一遍，对接口的使用有一定的印象，但是尝试测试原始代码的时候大数库出现了问题，主要是大数库并没有真正的编译链接生成.dll 和 .lib文件，使得出现无法解析的外部符号的错误，但是后续项目链接了利用libtommath本身的sln方案生成后得到的tommath.lib再次进行编译还是出现了这个错误

现在想到一个问题，为什么编译器能够识别这个库下面的接口呢

回答：是该项目本身将libtommath库中的包含文件列为了项目内部的头文件，导致项目不需要额外导入头文件，只需要将其实现文件(.lib .dll)文件链接到项目上即可

通过思考，考虑是生成环境的不同：libtommath本身是需要在win32环境下编译的，但是我们的项目本身是在x64环境下的，这样就导致项目无法识别来自win32下的lib文件（应该是）


### 第一进度的补充进度（2021-12-23 15：40）

目前已经成功编译运行项目，但是在解密的时候出现了错误，但是看不懂具体的报错信息，具体还要研究一下出错代号的详细含义因为今天没有什么动力去研究这个算法，所以先到这了，回去看书。^ ^

### 第一进度的补充进度（2021-12-24 8：44）

目前有一个问题，为什么通过随机数函数生成的随机数的位数只有10位，

